import { Component, OnInit, Input } from '@angular/core';
import { BrandingService } from "../services/branding.service";

@Component({
    selector: 'citi-header',
    template: require('./header.component.html')
})

export class HeaderComponent implements OnInit {

    // Constructor
    constructor(private brandingService: BrandingService){};

    // The branding config object
    brandingConfig: any;

    // The url for the branding service to get the branding config
    url: string;

    ngOnInit(){

        // Get the endpoint url
        var endpointUrl = this.brandingService.getCurrentUrl() || this.url;

        // If we found an endpoint url
        if ( endpointUrl ){

            // Get data from the branding service
            this.brandingService.getData(endpointUrl).subscribe(data => {
                this.brandingConfig = data;
            });
        }
    }

    @Input()
    set endpoint(url: string){
        this.url = url;
    }
}