<div [ngClass]="wrapperClasses" [class]="sizes[inputSize]">

    <!-- Label -->
    <label [for]="idStr" [id]="labelId" class="text-input-label">
        {{label || placeholder}}
    </label>


    <!-- PhoneCountry and phoneArea versions of input, duplicate required to get wrapped divs (additional service wiring needed) -->
    <div *ngIf="phoneCountry || phoneArea" class="group-input-combo">
        <div class="input-group combo-group">
            <!-- Phone Country Prefix Selector -->
            <div class="input-group-btn" *ngIf="phoneCountry">
                <select [attr.name]="name" class="form-control input-add-on country-code">
                    <option>+1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;United States</option>
                    <option>+93&nbsp;&nbsp;&nbsp;Afganistan</option>
                    <option>+355&nbsp;&nbsp;&nbsp;Albania</option>
                </select>
            </div>

            <!-- Before Area Code -->
            <span *ngIf="countryCode" class="input-group-addon"> {{countryCode}} </span>

            <!-- Phone Area Code Selector -->
            <div class="input-group-btn" *ngIf="phoneArea">
                <select [attr.name]="name" class="form-control input-add-on area-code">
                    <option>619&nbsp;&nbsp;&nbsp;Los Angeles</option>
                    <option>202&nbsp;&nbsp;&nbsp;Chicago</option>
                    <option>347&nbsp;&nbsp;&nbsp;New York</option>
                </select>
            </div>

            <!-- Before Currency Sign -->
            <span *ngIf="currencySignBefore" class="input-group-addon"> {{currencySignBefore}} </span>
            
            <!-- The Input -->
            <input
                #input
                [attr.type]="inputType" 
                [attr.name]="name" 
                [attr.id]="idStr" 
                [attr.placeholder]="placeholder" 
                [attr.step]="step" 
                [ngClass]="inputClasses"
                [(ngModel)]="value" 
                [attr.maxlength]="maxlength"
                [attr.data-rules]="rules" 
                [attr.data-placement]="placement" 
                [attr.aria-required]="isRequired ? true : null"
                [attr.required]="isRequired ? true : null" 
                [attr.data-format]="format" 
                [attr.data-additional-format]="addFormats" 
                [attr.data-format-enforcement]="formatEnf" 
                [attr.name]="inputName" 
                [readonly]="readOnly" 
                [attr.min]="min"
                [inputMask]="getMask"
                (focus)="onFocus()" 
                (focusout)="onBlur()" 
                (input)="onInput()"
                [attr.aria-invalid]="this.error ? true : null"
                [attr.aria-describedby]="describedby + ' ' + name + 'error'"
                [attr.aria-labelledby]="labelId"
            />
            <!-- End The Input -->

            <!-- Formatting Text (for simple date input type) -->
            <span class="formatting-text" aria-hidden="true" *ngIf="formattingText">
                <span class="format-text" (click)="focusInput()">{{formattingText}}</span>
            </span>

            <!-- After Currency Sign -->
            <span *ngIf="currencySignAfter" class="input-group-addon"> {{currencySignAfter}} </span>

            <!-- Tooltip -->
            <citi-tooltip *ngIf="tooltip" [tooltipTitle]="tooltipTitle" [tooltipBody]="tooltipText" [position]="tooltipPosition"></citi-tooltip>
            
            <!-- Error Messsage -->
            <span *ngIf="error" class="validation-message-danger" aria-live="assertive" [id]="name + 'error'"> {{errorMessage}} </span>
            <!-- End Error Message -->
        </div>
    </div>    

    <!-- input without front add-ons -->
    <div *ngIf="!phoneCountry && !phoneArea">
        <!-- The Input -->
        <input
            #input
            [attr.type]="inputType" 
            [attr.name]="name" 
            [attr.id]="idStr" 
            [attr.placeholder]="placeholder" 
            [attr.step]="step" 
            [ngClass]="inputClasses"
            [(ngModel)]="value" 
            [attr.maxlength]="maxlength"
            [attr.data-rules]="rules" 
            [attr.data-placement]="placement" 
            [attr.aria-required]="isRequired ? true : null"
            [attr.required]="isRequired ? true : null" 
            [attr.data-format]="format" 
            [attr.data-additional-format]="addFormats" 
            [attr.data-format-enforcement]="formatEnf" 
            [attr.name]="inputName" 
            [readonly]="readOnly" 
            [attr.min]="min"
            [inputMask]="getMask"
            (focus)="onFocus()" 
            (focusout)="onBlur()" 
            (input)="onInput()"
            [attr.aria-invalid]="this.error ? true : null"
            [attr.aria-describedby]="describedby + ' ' + name + 'error'"
            [attr.aria-labelledby]="labelId"
        />
        <!-- End The Input -->

        <!-- Formatting Text (for simple date input type) -->
        <span class="formatting-text" aria-hidden="true" *ngIf="formattingText">
            <span class="format-text" (click)="focusInput()">{{formattingText}}</span>
        </span>

        <!-- After Currency Sign -->
        <span *ngIf="currencySignAfter" class="input-group-addon"> {{currencySignAfter}} </span>

        <!-- Tooltip -->
        <citi-tooltip *ngIf="tooltip" [tooltipTitle]="tooltipTitle" [tooltipBody]="tooltipText" [position]="tooltipPosition"></citi-tooltip>
        
        <!-- Error Messsage -->
        <span *ngIf="error" class="validation-message-danger" aria-live="assertive" [id]="name + 'error'"> {{errorMessage}} </span>
        <!-- End Error Message -->
    </div>
</div>